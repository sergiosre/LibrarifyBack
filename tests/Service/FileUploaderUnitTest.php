<?php

namespace App\Service;

use League\Flysystem\FilesystemInterface;
use PHPUnit\Framework\MockObject\MockObject;
use PHPUnit\Framework\TestCase;

class FileUploaderUnitTest extends TestCase
{
    public function testSuccessUploadBase64File()
    {
        $base64Image = "data:image/jpeg;base64,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";

        $data = explode(',', $base64Image);

        /**
         * @var FilesystemInterface&MockObject $filesystem
         */
        $filesystem = $this->getMockBuilder(FilesystemInterface::class)
            ->disableOriginalConstructor()
            ->getMock();
        $filesystem->expects(self::exactly(1))
            ->method('write')
            ->with($this->isType('string'), base64_decode($data[1]));

        $fileUploader = new FileUploader($filesystem);
        $filename = $fileUploader->uploadBase64File($base64Image);
        $this->assertNotEmpty($filename);
        $this->assertContains('.jpeg', $filename);
    }
}
